
<script>
        function getHrefNew(type,attr){
            var url = document.location.href;
            var arr = url.match(/(https?:)\/\/([^\/]+)(\/[^\?]*)?(\?[^#]*)?(#.*)?/);
            var protocol = arr[1];  // 协议
            var host = arr[2];      // 主机
            var pathname = arr[3];  // 路径
            var search = arr[4];    // 查询
            var hash = arr[5];      // 哈希值
            var str;
            if(type=="?"){
                if(search){
                    str=search.replace("?","");
                }
            }
            if(type=="#"){
                if(hash){
                    str=hash.split("?")[1];
                }
            }
            if(str){
                if(str.indexOf("&")>-1){
                    str=str.split("&");
                    for(var x in str){
                        var arr=str[x].split("=");
                        if(arr[0]==attr){
                            return arr[1];
                        }
                    }
                }else{
                    var arr=str.split("=");
                    if(arr[0]==attr){
                        return arr[1];
                    }
                }
            }else{
                return;
            }
        }
        var code=getHrefNew("?","code");
        console.log(`code=》${code}`)
        if(code){
        // sessionStorage.code=code;
        sessionStorage.setItem('code',code)
        document.location.href="http://mmz.csxtech.com.cn/buy_test";
        }else{
        }
            </script>
        