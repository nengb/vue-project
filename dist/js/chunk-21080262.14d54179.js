(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21080262"],{"317a":function(t,a,e){"use strict";e.r(a);var i,s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page has-navbar",staticStyle:{transition:"none !important"}},[e("van-nav-bar",{attrs:{title:"我的积分",fixed:"",border:"","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"page-content text-center "},[e("div",{staticClass:"myscore"},[e("div",{staticClass:"score"},[e("div",{staticClass:"num"},[t._v("\n          "+t._s(t.user.score)+"\n        ")]),e("div",{staticClass:"cn"},[t._v("\n          积分\n        ")])]),e("van-tabs",{attrs:{swipeable:"",animated:"",sticky:"","offset-top":46},on:{change:t.vTabsChange},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.list,function(a,i){return e("van-tab",{key:i,attrs:{title:0==i?"积分获取":"积分支出"}},[e("van-pull-refresh",{attrs:{"pulling-text":" ","loosing-text":" ","loading-text":" "},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[e("van-list",{directives:[{name:"show",rawName:"v-show",value:i==t.active,expression:"index == active"}],attrs:{finished:!!(t.list[t.active]&&t.list[t.active][0]&&t.list[t.active][0].finished),"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(a){t.error=a},load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},[e("div",{staticClass:"con"},t._l(a,function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:a.ord_id,expression:"item.ord_id"}],staticClass:"conItem"},[e("div",{staticClass:"left"},[e("div",{staticClass:"img"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.img,expression:"item.img"}],attrs:{alt:"",width:"100%",height:"100%"}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v("\n                        "+t._s(a.name)+"\n                      ")]),e("div",{staticClass:"time"},[t._v("\n                        "+t._s(a.formatTime)+"\n                      ")])])]),e("div",{staticClass:"right"},[e("div",{staticClass:"msg"}),e("div",{staticClass:"score"},[t._v("\n                      "+t._s(0==i?"+":"-")+t._s(a.num)+"\n                    ")])])])}),0)])],1)],1)}),1)],1)])],1)},n=[],r=(e("96cf"),e("3b8d")),c=e("bd86"),o=(e("66cf"),e("343b")),l=(e("e7e5"),e("d399")),d=(e("ab71"),e("58e6")),u=(e("bda7"),e("5e46")),h=(e("da3c"),e("0b33")),v=(e("2994"),e("2bdd")),f=(e("7f7f"),e("5246"),e("6b41")),g=(e("cadf"),e("551c"),e("097d"),e("c621")),m=e("5552"),p=e("fb21"),b=(m["a"].genQueryString,m["a"].getQueryStringArgsAes,m["a"].formatTime),w={components:(i={},Object(c["a"])(i,f["a"].name,f["a"]),Object(c["a"])(i,v["a"].name,v["a"]),Object(c["a"])(i,h["a"].name,h["a"]),Object(c["a"])(i,u["a"].name,u["a"]),Object(c["a"])(i,d["a"].name,d["a"]),Object(c["a"])(i,l["a"].name,l["a"]),Object(c["a"])(i,o["a"].name,o["a"]),i),data:function(){return{list:{0:[{}],1:[{}]},active:0,loading:!1,finished:!1,error:!1,isLoading:!1,user:{},classLoading:[0,0]}},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.user=p["a"].getUserData(),this.loadMoreData(0,!0),this.loadMoreData(1,!0);case 3:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),methods:{onClickLeft:function(){this.$router.back()},vTabsChange:function(){this.list[this.active]&&this.list[this.active][0]&&this.list[this.active][0].finished},loadMoreData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a,e){var i,s,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=e?1:this.list[a][0].page+1,s=1==a?"get_score_pay_bills":"get_score_bills",1!=this.classLoading[a]){t.next=4;break}return t.abrupt("return");case 4:if(this.classLoading[a]=1,!(isNaN(i)||this.list[a]&&this.list[a].finished)){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,g["a"][s]({page:i});case 9:n=t.sent,n&&n.data&&n.data.length>0?(n.data.map(function(t){return t.formatTime=b(new Date(t.time)),t}),e?(n.data[0].page=i,n.data[0].pageSize=n.data.length,this.$set(this.list,a,n.data)):(this.list[a][0].page++,this.list[a]=this.list[a].slice(0,(i-1)*this.list[a][0].pageSize).concat(n.data)),this.loading=!1):n&&1==n.errcode?(this.list[a]||(this.list[a]=[{}]),this.$set(this.list[a][0],"finished",!0),this.loading=!1,this.list[a].page>2&&Object(l["a"])("我是有底线的~")):this.error=!0,this.classLoading[a]=0;case 12:case"end":return t.stop()}},t,this)}));function a(a,e){return t.apply(this,arguments)}return a}(),onLoad:function(){this.loadMoreData(this.active)},onRefresh:function(){var t=this;setTimeout(function(){t.isLoading=!1},10)}}},_=w,x=(e("ad5a"),e("2877")),C=Object(x["a"])(_,s,n,!1,null,null,null);C.options.__file="Myscore.vue";a["default"]=C.exports},ad5a:function(t,a,e){"use strict";var i=e("dca3"),s=e.n(i);s.a},dca3:function(t,a,e){}}]);
//# sourceMappingURL=chunk-21080262.14d54179.js.map